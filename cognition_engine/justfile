# Kairix Cognition Engine Justfile


all: clean install fix typecheck test

# Install dependencies using uv
install:
    uv sync

# Run example demo
demo:
    uv run python -m examples.demo

# Run all tests
test:
    uv run pytest tests/

# Run specific test file
test-file FILE:
    uv run pytest tests/{{FILE}}

# Run linting with ruff
fix:
    uv run ruff check --fix src/ tests/ examples/

# Run linting with unsafe fixes
fix-unsafe:
    uv run ruff check --fix --unsafe-fixes src/ tests/ examples/

# Run type checking with ty
typecheck:
    uv run ty check src/ tests/ examples/

# Clean Python cache files
clean:
    rm -rf .venv
    rm -rf uv.lock
    find . -type d -name "__pycache__" -exec rm -rf {} +
    find . -type f -name "*.pyc" -delete
    find . -type f -name "*.pyo" -delete
    find . -type f -name ".coverage" -delete
    find . -type d -name "*.egg-info" -exec rm -rf {} +
    find . -type d -name ".pytest_cache" -exec rm -rf {} +

# Development mode - run demo with auto-reload
dev:
    uv run python -m examples.demo

# Show project structure
tree:
    tree -I '__pycache__|*.pyc|.git'
